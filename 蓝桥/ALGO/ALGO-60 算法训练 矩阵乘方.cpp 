#include <iostream>
#include <vector>
using namespace std;
vector<int> f(vector<int> v, int k, int m) {
    vector<int> ans(5);
    if (k == 0) {
        ans[1] = ans[4] = 1;
        ans[2] = ans[3] = 0;
    } else {
        if (k % 2 == 0) {
            vector<int> t = f(v, k / 2, m);
            ans[1] = (t[1] * t[1] + t[2] * t[3]) % m;
            ans[2] = (t[1] * t[2] + t[2] * t[4]) % m;
            ans[3] = (t[3] * t[1] + t[4] * t[3]) % m;
            ans[4] = (t[3] * t[2] + t[4] * t[4]) % m;
        } else {
            vector<int> t = f(v, k - 1, m);
            ans[1] = (t[1] * v[1] + t[2] * v[3]) % m;
            ans[2] = (t[1] * v[2] + t[2] * v[4]) % m;
            ans[3] = (t[3] * v[1] + t[4] * v[3]) % m;
            ans[4] = (t[3] * v[2] + t[4] * v[4]) % m;
        }
    }
    return ans;
}
int main() {
    int k, m, a, b, c, d;
    vector<int> v(5), ans;
    cin >> k >> m >> v[1] >> v[2] >> v[3] >> v[4];
    ans = f(v, k, m);
    printf("%d %d\n%d %d\n", ans[1], ans[2], ans[3], ans[4]);
    return 0;
}
